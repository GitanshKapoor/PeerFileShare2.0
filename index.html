<html>
<head>
   <title>PeerFileShare 2.0</title>
   <link rel="shortcut icon" type="image/png" href="icon.png">
   <style>
      body {
         font-family: Arial, sans-serif;
         background-color: #f4f4f4;
         margin: 0;
         padding: 20px;
         text-align: center;
      }

      h1 {
         color: #4A90E2;
         font-size: 2.5em;
         margin-bottom: 10px;
         text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
      }

      h2 {
         color: #333;
         font-size: 1.8em;
         margin-bottom: 20px;
      }

      form {
         margin: 20px auto;
         padding: 20px;
         border: 1px solid #ccc;
         border-radius: 10px;
         background-color: #fff;
         box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
         max-width: 400px;
      }

      input[type="file"] {
         margin-bottom: 10px;
         border: 1px solid #ccc;
         padding: 10px;
         border-radius: 5px;
         width: 100%;
         box-sizing: border-box;
      }

      button {
         background-color: #28a745;
         color: white;
         border: none;
         padding: 10px 20px;
         border-radius: 5px;
         cursor: pointer;
         font-size: 1em;
      }

      button:hover {
         background-color: #218838;
      }

      #uploadStatus {
         margin-top: 20px;
         font-weight: bold;
         color: #4A90E2;
      }

      footer {
         margin-top: 40px;
         font-size: 0.9em;
         color: #666;
      }
   </style>
</head>
<body>
   <h1>PeerFileShare 2.0</h1>
   <h2>Upload a File</h2>
   <form id="uploadForm" enctype="multipart/form-data">
      <input type="file" id="fileInput">
      <button type="button" onclick="uploadFile()">Upload</button>
   </form>
   <p id="uploadStatus"></p>

   <script>
      async function uploadFile() {
         const file = document.getElementById('fileInput').files[0];
         if (!file) {
            return alert('Please select a file.');
         }

         const formData = new FormData();
         formData.append('file', file);

         try {
            const response = await fetch('https://peerfileshare.azurewebsites.net/api/UploadFileFunction?code=XSv0jCKJVcVng0J5YYrkPdLSVFs4KC9QXDuUOmLovyjYAzFuxTxcpg%3D%3D', {
               method: 'POST',
               body: formData
            });

            if (!response.ok) {
               throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();

            // Assuming the result contains a "url" property for the uploaded file
            document.getElementById('uploadStatus').innerHTML = `File uploaded: <a href="${result.url}" target="_blank">${result.url}</a>`;
         } catch (error) {
            console.error('Error uploading file:', error);
            document.getElementById('uploadStatus').innerHTML = 'Failed to upload file. Please try again.';
         }
      }
   </script>

   <footer>
      &copy; 2024 PeerFileShare 2.0. All rights reserved.
   </footer>
</body>
</html>
